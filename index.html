<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Algorithm Visualizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 外部CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ===========================
       ヘッダー
  ============================ -->
  <header class="header">
    <h1>Algorithm Visualizer</h1>
    <p class="subtitle">各種アルゴリズムのステップ実行と可視化</p>
  </header>

  <!-- ===========================
       メインコンテナ
  ============================ -->
  <div class="container">

    <!-- アルゴリズム選択ドロップダウン -->
    <div class="section">
      <label class="label" for="algoSelect">アルゴリズムを選択：</label>
      <select id="algoSelect" class="select">
        <option value="">-- 選択してください --</option>
        <option value="edit">Edit Distance (編集距離)</option>
        <option value="knapsack">0/1 Knapsack</option>
        <option value="sorting">Sorting</option>
        <option value="searching">Searching</option>
        <option value="forward">Forward Algorithm (HMM)</option>
        <option value="viterbi">Viterbi Algorithm (HMM)</option>
        <option value="lp">Linear Programming (Simplex)</option>
        <option value="hash">Hash (Open Addressing)</option>
        <option value="stack">Stack</option>
        <option value="queue">Queue</option>
        <option value="hashChain">Hash (Chaining)</option>
      </select>
    </div>

    <!-- 背景知識タブ（アルゴリズムごとの説明） -->
    <div id="bgTabs" class="tabs" style="display: none; margin-bottom: 16px;">
      <button class="tab-button active" data-tab="tab-edit">Edit Distance</button>
      <button class="tab-button" data-tab="tab-knap">Knapsack</button>
      <button class="tab-button" data-tab="tab-sort">Sorting</button>
      <button class="tab-button" data-tab="tab-search">Searching</button>
      <button class="tab-button" data-tab="tab-forward">Forward</button>
      <button class="tab-button" data-tab="tab-viterbi">Viterbi</button>
      <button class="tab-button" data-tab="tab-lp">LP (Simplex)</button>
      <button class="tab-button" data-tab="tab-hashOpen">Hash (Open Addressing)</button>
      <button class="tab-button" data-tab="tab-stack">Stack</button>
      <button class="tab-button" data-tab="tab-queue">Queue</button>
      <button class="tab-button" data-tab="tab-hashChain">Hash (Chaining)</button>
    </div>

    <!-- 背景知識タブの内容 -->
    <div id="tab-edit" class="tab-content active">
      <div class="section">
        <h2 class="section-title">Edit Distance (編集距離) の背景知識</h2>
        <p class="description">
Dynamic Programming を用いて、文字列 s1 → s2 への最少操作回数（挿入・削除・置換）を求めます。
各セル dp[i][j] は、s1 の先頭 i 文字と s2 の先頭 j 文字の編集距離を表します。
        </p>
      </div>
    </div>

    <div id="tab-knap" class="tab-content">
      <div class="section">
        <h2 class="section-title">0/1 Knapsack の背景知識</h2>
        <p class="description">
限られた容量 W の中で、重み w[i], 価値 v[i] を持つ n 個の品物から価値の和を最大化する問題です。
dp[i][j] は「品物 i まで検討して容量 j を使ったときの最大価値」を表します。
        </p>
      </div>
    </div>

    <div id="tab-sort" class="tab-content">
      <div class="section">
        <h2 class="section-title">Sorting の背景知識</h2>
        <p class="description">
バブルソート、クイックソート、マージソート、挿入ソート、選択ソート等のアルゴリズムを可視化します。
比較・交換のたびに状態を描画することで、アルゴリズムの動作を直感的に理解できます。
        </p>
      </div>
    </div>

    <div id="tab-search" class="tab-content">
      <div class="section">
        <h2 class="section-title">Searching の背景知識</h2>
        <p class="description">
線形探索 (Linear)、2分探索 (Binary)、番兵法 (Sentinel) を可視化します。
配列上の要素を順番に、あるいは範囲を半分ずつ絞りながら探索する過程を示します。
        </p>
      </div>
    </div>

    <div id="tab-forward" class="tab-content">
      <div class="section">
        <h2 class="section-title">Forward Algorithm の背景知識</h2>
        <p class="description">
隠れマルコフモデル (HMM) において、ある観測系列 {o₀…oₜ} が生成される確率を
動的計画法で計算するアルゴリズムです。α[t][i] = Σ_i α[t−1][i]*a[i→j] × b[j→oₜ] という式が柱になります。
        </p>
      </div>
    </div>

    <div id="tab-viterbi" class="tab-content">
      <div class="section">
        <h2 class="section-title">Viterbi Algorithm の背景知識</h2>
        <p class="description">
HMM において、観測系列がもっとも起こりやすい隠れ状態列を求めるアルゴリズムです。
動的計画法で「最大 (前時刻の確率 × 遷移確率)」を保持しながら、ψ[t][i] を使って経路復元します。
        </p>
      </div>
    </div>

    <div id="tab-lp" class="tab-content">
      <div class="section">
        <h2 class="section-title">Linear Programming (Simplex) の背景知識</h2>
        <p class="description">
線形計画問題を標準形 (スラック変数を付加) に変形し、単純形表を構築します。  
ここでは「最初の単純形表の構築」を可視化し、ピボットステップの詳細は省略した形とします。
        </p>
      </div>
    </div>

    <div id="tab-hashOpen" class="tab-content">
      <div class="section">
        <h2 class="section-title">Hash (Open Addressing) の背景知識</h2>
        <p class="description">
オープンアドレス法（リニアプロービング）でハッシュテーブルにキーを挿入する過程を可視化します。
ハッシュ値 h = k mod m を基準とし、衝突があれば (h+1)%m, (h+2)%m … と順に調べます。
        </p>
      </div>
    </div>

    <div id="tab-stack" class="tab-content">
      <div class="section">
        <h2 class="section-title">Stack の背景知識</h2>
        <p class="description">
後入れ先出し (LIFO) のデータ構造「スタック」を可視化します。
push/pop を行うたびに、要素が上に積まれていく様子や取り出される様子を描画します。
        </p>
      </div>
    </div>

    <div id="tab-queue" class="tab-content">
      <div class="section">
        <h2 class="section-title">Queue の背景知識</h2>
        <p class="description">
先入れ先出し (FIFO) のデータ構造「キュー」を可視化します。
enqueue/dequeue を行うたびに要素が並ぶ様子や取り出される様子を描画します。
        </p>
      </div>
    </div>

    <div id="tab-hashChain" class="tab-content">
      <div class="section">
        <h2 class="section-title">Hash (Chaining) の背景知識</h2>
        <p class="description">
チェイン法ハッシュでは、ハッシュテーブルの各スロットに連結リスト(チェイン)を持たせます。
キー k のハッシュ値 h = k mod m を使い、同じスロットに複数キーをリンクリストとして保持します。
        </p>
      </div>
    </div>

    <!-- ===========================
         1) Edit Distance 用コントロール
    ============================ -->
    <div id="editControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">文字列1 (s1): 
          <input type="text" id="edit_s1" class="input" placeholder="例: waseda">
        </label>
        <label class="label">文字列2 (s2): 
          <input type="text" id="edit_s2" class="input" placeholder="例: university">
        </label>
        <label class="label">スピード (倍速): 
          <select id="editSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="editInitBtn" class="btn">Initialize</button>
        <button id="editRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="editPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="editNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="editAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="editProgress">ステップ 0 / 0</div>
      <div class="table-wrapper">
        <table id="editTable" class="trellis-table"></table>
      </div>
      <p class="description" id="editDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         2) Knapsack 用コントロール
    ============================ -->
    <div id="knapControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">重みリスト (カンマ区切り):
          <input type="text" id="knap_weights" class="input" placeholder="例: 2,3,4,5">
        </label>
        <label class="label">価値リスト (カンマ区切り):
          <input type="text" id="knap_values" class="input" placeholder="例: 3,4,5,6">
        </label>
        <label class="label">容量 (capacity):
          <input type="number" id="knap_capacity" class="input" placeholder="例: 8">
        </label>
        <label class="label">スピード (倍速):
          <select id="knapSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="knapInitBtn" class="btn">Initialize</button>
        <button id="knapRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="knapPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="knapNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="knapAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="knapProgress">ステップ 0 / 0</div>
      <div class="table-wrapper">
        <table id="knapTable" class="trellis-table"></table>
      </div>
      <p class="description" id="knapDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         3) Sorting 用コントロール
    ============================ -->
    <div id="sortControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">配列 (カンマ区切り、数値):
          <input type="text" id="sort_array" class="input" placeholder="例: 5,2,9,1,5">
        </label>
        <label class="label">アルゴリズム:
          <select id="sortAlgoSelect" class="select">
            <option value="bubble" selected>Bubble Sort</option>
            <option value="quick">Quick Sort</option>
            <option value="merge">Merge Sort</option>
            <option value="insert">Insertion Sort</option>
            <option value="select">Selection Sort</option>
          </select>
        </label>
        <label class="label">スピード (倍速):
          <select id="sortSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="sortInitBtn" class="btn">Initialize</button>
        <button id="sortRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="sortPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="sortNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="sortAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="sortProgress">ステップ 0 / 0</div>
      <div class="bars-wrapper" id="sortBars"></div>
      <p class="description" id="sortDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         4) Searching 用コントロール
    ============================ -->
    <div id="searchControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">配列 (ソート済み、カンマ区切り):
          <input type="text" id="search_array" class="input" placeholder="例: 1,2,3,5,7,8">
        </label>
        <label class="label">キー:
          <input type="number" id="search_key" class="input" placeholder="例: 5">
        </label>
        <label class="label">アルゴリズム:
          <select id="searchAlgoSelect" class="select">
            <option value="linear" selected>Linear Search</option>
            <option value="binary">Binary Search</option>
            <option value="sentinel">Sentinel Search</option>
          </select>
        </label>
        <label class="label">スピード (倍速):
          <select id="searchSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="searchInitBtn" class="btn">Initialize</button>
        <button id="searchRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="searchPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="searchNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="searchAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="searchProgress">ステップ 0 / 0</div>
      <div class="bars-wrapper" id="searchBars"></div>
      <p class="description" id="searchDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         5) Forward Algorithm 用コントロール
    ============================ -->
    <div id="forwardControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">状態 (カンマ区切り):
          <input type="text" id="fwd_states" class="input" placeholder="例: S0,S1">
        </label>
        <label class="label">観測系列 (カンマ区切り):
          <input type="text" id="fwd_obs" class="input" placeholder="例: o0,o1,o2">
        </label>
      </div>
      <div class="controls">
        <label class="label">π (カンマ区切り):
          <textarea id="fwd_pi" class="input" rows="1" placeholder="例: 0.6,0.4"></textarea>
        </label>
        <label class="label">A 行列 (N×N、改行区切りで):
          <textarea id="fwd_A" class="input" rows="3" placeholder="例:
0.7,0.3
0.4,0.6"></textarea>
        </label>
        <label class="label">B 行列 (N×T、改行区切りで):
          <textarea id="fwd_B" class="input" rows="3" placeholder="例:
0.5,0.5,0.0
0.0,0.5,0.5"></textarea>
        </label>
      </div>
      <div class="controls">
        <label class="label">スピード (倍速):
          <select id="fwdSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="fwdInitBtn" class="btn">Initialize</button>
        <button id="fwdRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="fwdPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="fwdNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="fwdAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="fwdProgress">ステップ 0 / 0</div>
      <div class="table-wrapper">
        <table id="fwdTable" class="trellis-table"></table>
      </div>
      <p class="description" id="fwdDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         6) Viterbi Algorithm 用コントロール
    ============================ -->
    <div id="viterbiControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">状態 (カンマ区切り):
          <input type="text" id="vit_states" class="input" placeholder="例: S0,S1">
        </label>
        <label class="label">観測系列 (カンマ区切り):
          <input type="text" id="vit_obs" class="input" placeholder="例: o0,o1,o2">
        </label>
      </div>
      <div class="controls">
        <label class="label">π (カンマ区切り):
          <textarea id="vit_pi" class="input" rows="1" placeholder="例: 0.6,0.4"></textarea>
        </label>
        <label class="label">A 行列 (N×N、改行区切りで):
          <textarea id="vit_A" class="input" rows="3" placeholder="例:
0.7,0.3
0.4,0.6"></textarea>
        </label>
        <label class="label">B 行列 (N×T、改行区切りで):
          <textarea id="vit_B" class="input" rows="3" placeholder="例:
0.5,0.5,0.0
0.0,0.5,0.5"></textarea>
        </label>
      </div>
      <div class="controls">
        <label class="label">スピード (倍速):
          <select id="vitSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="vitInitBtn" class="btn">Initialize</button>
        <button id="vitRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="vitPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="vitNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="vitAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="vitProgress">ステップ 0 / 0</div>
      <div class="table-wrapper">
        <table id="vitTable" class="trellis-table"></table>
      </div>
      <p class="description" id="vitDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         7) Linear Programming 用コントロール
    ============================ -->
    <div id="lpControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">LP 定義 (標準形)：<br>
          <textarea id="lp_input" class="input" rows="6" placeholder="例：
maximize 3x + 2y
s.t.
 x +  y ≤ 5
2x + 3y ≤ 12
 x ≤ 3
 y ≤ 4"></textarea>
        </label>
      </div>
      <div class="controls">
        <label class="label">スピード (倍速):
          <select id="lpSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="lpInitBtn" class="btn">Initialize</button>
        <button id="lpRandomBtn" class="btn outline">Sample</button>
      </div>
      <div class="step-controls">
        <button id="lpPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="lpNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="lpAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="lpProgress">ステップ 0 / 0</div>
      <div class="table-wrapper">
        <table id="simplexTable" class="simplex-table"></table>
      </div>
      <p class="description" id="lpDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         8) Hash (Open Addressing) 用コントロール
    ============================ -->
    <div id="hashControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">テーブルサイズ m:
          <input type="number" id="hash_m" class="input" placeholder="例: 7">
        </label>
        <label class="label">キー列 (カンマ区切り):
          <input type="text" id="hash_keys" class="input" placeholder="例: 10,22,31,4,15">
        </label>
        <label class="label">スピード (倍速):
          <select id="hashSpeedSelect" class="speed-select">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
        </label>
        <button id="hashInitBtn" class="btn">Initialize</button>
        <button id="hashRandomBtn" class="btn outline">Random</button>
      </div>
      <div class="step-controls">
        <button id="hashPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="hashNextBtn" class="btn small" disabled>次へ ▶︎</button>
        <button id="hashAutoBtn" class="btn small" disabled>Auto Play</button>
      </div>
      <div class="progress" id="hashProgress">ステップ 0 / 0</div>
      <div class="hash-container" id="hashContainer"></div>
      <p class="description" id="hashDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         9) Stack 用コントロール
    ============================ -->
    <div id="stackControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">初期値 (カンマ区切り):
          <input type="text" id="stack_value" class="input" placeholder="例: A,B,C">
        </label>
        <button id="stackInitBtn" class="btn">Initialize</button>
      </div>
      <div class="controls" style="margin-top: 8px;">
        <button id="stackPushBtn" class="btn outline">Push</button>
        <button id="stackPopBtn" class="btn outline">Pop</button>
      </div>
      <div class="step-controls" style="margin-top: 8px;">
        <button id="stackPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="stackNextBtn" class="btn small" disabled>次へ ▶︎</button>
      </div>
      <div class="progress" id="stackProgress">ステップ 0 / 0</div>
      <div class="table-wrapper" style="display: flex; justify-content: center;">
        <div id="stackContainer" style="display: flex; flex-direction: column-reverse; gap: 4px;"></div>
      </div>
      <p class="description" id="stackDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         10) Queue 用コントロール
    ============================ -->
    <div id="queueControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">初期値 (カンマ区切り):
          <input type="text" id="queue_value" class="input" placeholder="例: 1,2,3">
        </label>
        <button id="queueInitBtn" class="btn">Initialize</button>
      </div>
      <div class="controls" style="margin-top: 8px;">
        <button id="queueEnqueueBtn" class="btn outline">Enqueue</button>
        <button id="queueDequeueBtn" class="btn outline">Dequeue</button>
      </div>
      <div class="step-controls" style="margin-top: 8px;">
        <button id="queuePrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="queueNextBtn" class="btn small" disabled>次へ ▶︎</button>
      </div>
      <div class="progress" id="queueProgress">ステップ 0 / 0</div>
      <div class="table-wrapper" style="display: flex; justify-content: center;">
        <div id="queueContainer" style="display: flex; gap: 8px;"></div>
      </div>
      <p class="description" id="queueDesc">ここにステップの説明が表示されます。</p>
    </div>

    <!-- ===========================
         11) Hash (Chaining) 用コントロール
    ============================ -->
    <div id="hashChainControls" class="algo-controls" style="display: none;">
      <div class="controls">
        <label class="label">テーブルサイズ (m):
          <input type="number" id="hashChainSize" class="input" placeholder="例: 7">
        </label>
        <label class="label">キー列 (カンマ区切り):
          <input type="text" id="hashChainKeys" class="input" placeholder="例: 10,22,31,4,15">
        </label>
        <button id="hashChainInitBtn" class="btn">Initialize</button>
      </div>
      <div class="step-controls" style="margin-top: 8px;">
        <button id="hashChainPrevBtn" class="btn small" disabled>◀︎ 前へ</button>
        <button id="hashChainNextBtn" class="btn small" disabled>次へ ▶︎</button>
      </div>
      <div class="progress" id="hashChainProgress">ステップ 0 / 0</div>
      <div class="hash-container" id="hashChainContainer" style="flex-wrap: wrap;"></div>
      <p class="description" id="hashChainDesc">ここにステップの説明が表示されます。</p>
    </div>

  </div> <!-- /.container -->

  <!-- ===========================
       JavaScript の読み込み
  ============================ -->
  <script src="js/common.js"></script>
  <script src="js/edit.js"></script>
  <script src="js/knapsack.js"></script>
  <script src="js/sorting.js"></script>
  <script src="js/searching.js"></script>
  <script src="js/forward.js"></script>
  <script src="js/viterbi.js"></script>
  <script src="js/lp.js"></script>
  <script src="js/hashOpen.js"></script>
  <script src="js/stack.js"></script>
  <script src="js/queue.js"></script>
  <script src="js/hashChaining.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
