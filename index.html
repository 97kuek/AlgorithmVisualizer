<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>アルゴリズム可視化ツール（スーパー強化版）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- 外部CSS を読み込む -->
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header class="header">
    アルゴリズム可視化ツール（スーパー強化版）<br>
    <span class="subtitle">
      ソート・探索・HMM（フォワード／ビタビ）・線形計画・ハッシュ法 ＋ ランダム生成＆色の凡例
    </span>
  </header>

  <main class="container">
    <!-- ▼▼▼ 色の凡例 ▼▼▼ -->
    <section class="section legend">
      <h3 class="section-title">色の凡例（Legend）</h3>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-color normal"></div>
          <span>通常の要素</span>
        </div>
        <div class="legend-item">
          <div class="legend-color highlight"></div>
          <span>現在比較／更新中の要素</span>
        </div>
        <div class="legend-item">
          <div class="legend-color confirmed"></div>
          <span>最終確定済みの要素</span>
        </div>
      </div>
    </section>

    <!-- アルゴリズム選択 -->
    <section class="section controls">
      <label class="label" for="algoSelect">アルゴリズムを選択：</label>
      <select id="algoSelect" class="select">
        <option value="">-- 選択してください --</option>
        <option value="edit">Edit Distance</option>
        <option value="knapsack">0/1 Knapsack</option>
        <option value="sorting">Sorting</option>
        <option value="searching">Searching</option>
        <option value="forward">Forward アルゴリズム</option>
        <option value="viterbi">Viterbi アルゴリズム</option>
        <option value="lp">線形計画法（単純形法）</option>
        <option value="hash">ハッシュ法（オープンアドレス法）</option>
      </select>
    </section>

    <!-- ================================
         1) Edit Distance（編集距離）
         ================================ -->
    <section id="editControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">Edit Distance（編集距離）</h2>
      <div class="controls">
        <label class="label">文字列 1（s1）：
          <input type="text" id="edit_s1" class="input" placeholder="例: waseda" />
        </label>
        <label class="label">文字列 2（s2）：
          <input type="text" id="edit_s2" class="input" placeholder="例: university" />
        </label>
        <button id="editInitBtn" class="btn">Initialize</button>
        <button id="editRandomBtn" class="btn">ランダム生成</button>
      </div>

      <div id="editTableWrapper" class="table-wrapper">
        <table id="editTable"></table>
      </div>

      <div class="controls">
        <label class="label">
          Auto Play 速度：
          <span id="editSpeedLabel">1.0</span> 秒
        </label>
        <input type="range" id="editSpeedSlider" class="slider"
               min="0.2" max="2.0" step="0.1" value="1.0" />
      </div>
      <div class="step-controls">
        <button id="editPrevBtn" class="btn" disabled>前へ</button>
        <button id="editNextBtn" class="btn" disabled>次へ</button>
        <button id="editAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="editProgress" class="progress">ステップ 0 / 0</div>
      <div id="editDesc" class="description">
        <strong>編集距離（Edit Distance）とは：</strong><br>
        文字列 A を B に変換するとき、挿入・削除・置換の操作を最小何回行えばよいかを求めるアルゴリズムです。<br>
        DP テーブルを使って、ステップごとにどのように値が埋まるかを可視化します。
      </div>
    </section>

    <!-- ================================
         2) 0/1 Knapsack
         ================================ -->
    <section id="knapControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">0/1 Knapsack</h2>
      <div class="controls">
        <label class="label">重みリスト（カンマ区切り）：
          <input type="text" id="knap_weights" class="input"
                 placeholder="例: 2,3,4,5" />
        </label>
        <label class="label">価値リスト（カンマ区切り）：
          <input type="text" id="knap_values" class="input"
                 placeholder="例: 3,4,5,6" />
        </label>
        <label class="label">容量 (capacity)：
          <input type="number" id="knap_capacity" class="input"
                 placeholder="例: 8" />
        </label>
        <button id="knapInitBtn" class="btn">Initialize</button>
        <button id="knapRandomBtn" class="btn">ランダム生成</button>
      </div>

      <div id="knapTableWrapper" class="table-wrapper">
        <table id="knapTable"></table>
      </div>

      <div class="controls">
        <label class="label">
          Auto Play 速度：
          <span id="knapSpeedLabel">1.0</span> 秒
        </label>
        <input type="range" id="knapSpeedSlider" class="slider"
               min="0.2" max="2.0" step="0.1" value="1.0" />
      </div>
      <div class="step-controls">
        <button id="knapPrevBtn" class="btn" disabled>前へ</button>
        <button id="knapNextBtn" class="btn" disabled>次へ</button>
        <button id="knapAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="knapProgress" class="progress">ステップ 0 / 0</div>
      <div id="knapDesc" class="description">
        <strong>0/1 Knapsack とは：</strong><br>
        限られた重さのキャパシティの中で、価値を最大化する問題です。<br>
        各品物は「重み」「価値」を持ち、選ぶ（1）・選ばない（0）の組み合わせを決めます。<br>
        DP テーブルを可視化し、「入れる場合」「入れない場合」の価値を比較します。
      </div>
    </section>

    <!-- ================================
         3) Sorting（ソート）
         ================================ -->
    <section id="sortControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">Sorting（ソート）</h2>
      <div class="controls">
        <label class="label">ソート種類：
          <select id="sortAlgoSelect" class="select">
            <option value="bubble">バブルソート</option>
            <option value="quick">クイックソート</option>
            <option value="merge">マージソート</option>
            <option value="insert">挿入ソート</option>
            <option value="select">選択ソート</option>
          </select>
        </label>
        <label class="label">ソート対象リスト：
          <input type="text" id="sort_array" class="input"
                 placeholder="例: 5,2,9,1,5" />
        </label>
        <button id="sortInitBtn" class="btn">Initialize</button>
        <button id="sortRandomBtn" class="btn">ランダム生成</button>
      </div>

      <div id="sortBars" class="bars-wrapper"></div>

      <div class="controls">
        <label class="label">
          Auto Play 速度：
          <span id="sortSpeedLabel">1.0</span> 秒
        </label>
        <input type="range" id="sortSpeedSlider" class="slider"
               min="0.2" max="2.0" step="0.1" value="1.0" />
      </div>
      <div class="step-controls">
        <button id="sortPrevBtn" class="btn" disabled>前へ</button>
        <button id="sortNextBtn" class="btn" disabled>次へ</button>
        <button id="sortAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="sortProgress" class="progress">ステップ 0 / 0</div>
      <div id="sortDesc" class="description">
        <strong>Sorting とは：</strong><br>
        配列を昇順（小さい順）に並び替える操作です。<br>
        さまざまな手法をバー表示でステップごとに可視化します：
        <ul>
          <li>バブルソート</li>
          <li>クイックソート</li>
          <li>マージソート</li>
          <li>挿入ソート</li>
          <li>選択ソート</li>
        </ul>
      </div>
    </section>

    <!-- ================================
         4) Searching（線形探索／2分探索／番兵法）
         ================================ -->
    <section id="searchControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">Searching（探索）</h2>
      <div class="controls">
        <label class="label">探索方法：
          <select id="searchAlgoSelect" class="select">
            <option value="linear">線形探索 (Linear)</option>
            <option value="binary">2分探索 (Binary)</option>
            <option value="sentinel">番兵法 (Sentinel)</option>
          </select>
        </label>
        <label class="label">探索対象リスト：
          <input type="text" id="search_array" class="input"
                 placeholder="例: 1,2,3,5,7,8" />
        </label>
        <label class="label">探索キー：
          <input type="number" id="search_key" class="input"
                 placeholder="例: 5" />
        </label>
        <button id="searchInitBtn" class="btn">Initialize</button>
        <button id="searchRandomBtn" class="btn">ランダム生成</button>
      </div>

      <div id="searchBars" class="bars-wrapper"></div>

      <div class="controls">
        <label class="label">
          Auto Play 速度：
          <span id="searchSpeedLabel">1.0</span> 秒
        </label>
        <input type="range" id="searchSpeedSlider" class="slider"
               min="0.2" max="2.0" step="0.1" value="1.0" />
      </div>
      <div class="step-controls">
        <button id="searchPrevBtn" class="btn" disabled>前へ</button>
        <button id="searchNextBtn" class="btn" disabled>次へ</button>
        <button id="searchAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="searchProgress" class="progress">ステップ 0 / 0</div>
      <div id="searchDesc" class="description">
        <strong>Searching とは：</strong><br>
        配列から特定の値（キー）を見つける操作です：
        <ul>
          <li>線形探索：先頭から順次チェック</li>
          <li>2分探索：あらかじめソート済み配列から中央を比較し範囲を半分に絞る</li>
          <li>番兵法：末尾に「番兵」を追加してループ条件をシンプルに</li>
        </ul>
        バー表示を使って、各ステップでどの要素をチェックしているかを可視化します。        
      </div>
    </section>

    <!-- ================================
         5) Forward アルゴリズム（HMM）
         ================================ -->
    <section id="forwardControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">Forward アルゴリズム（HMM）</h2>
      <div class="controls">
        <label class="label">状態（カンマ区切り）：
          <input type="text" id="fwd_states" class="input"
                 placeholder="例: Rainy,Sunny" />
        </label>
        <label class="label">観測系列（カンマ区切り）：
          <input type="text" id="fwd_obs" class="input"
                 placeholder="例: walk,shop,clean" />
        </label>
      </div>
      <div class="controls">
        <label class="label">初期確率 π（コンマ区切り；状態順）：
          <input type="text" id="fwd_pi" class="input"
                 placeholder="例: 0.6,0.4" />
        </label>
      </div>
      <div class="controls">
        <label class="label">遷移確率 A（行ごとにカンマ区切り，改行区切り）：
          <textarea id="fwd_A" class="input" rows="3"
            placeholder="例：
0.7,0.3
0.4,0.6"></textarea>
        </label>
      </div>
      <div class="controls">
        <label class="label">出力確率 B（行ごとにカンマ区切り，改行区切り）：
          <textarea id="fwd_B" class="input" rows="3"
            placeholder="例：
0.1,0.4,0.5
0.6,0.3,0.1"></textarea>
        </label>
      </div>
      <div class="controls">
        <button id="fwdInitBtn" class="btn">Initialize</button>
        <!-- ランダム生成は難しいので省略 -->
      </div>

      <div id="fwdTableWrapper" class="table-wrapper">
        <table id="fwdTable"></table>
      </div>

      <div class="controls">
        <label class="label">
          Auto Play 速度：
          <span id="fwdSpeedLabel">1.0</span> 秒
        </label>
        <input type="range" id="fwdSpeedSlider" class="slider"
               min="0.2" max="2.0" step="0.1" value="1.0" />
      </div>
      <div class="step-controls">
        <button id="fwdPrevBtn" class="btn" disabled>前へ</button>
        <button id="fwdNextBtn" class="btn" disabled>次へ</button>
        <button id="fwdAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="fwdProgress" class="progress">ステップ 0 / 0</div>
      <div id="fwdDesc" class="description">
        <strong>Forward アルゴリズムとは：</strong><br>
        HMM（隠れマルコフモデル）において、観測系列が与えられたとき、
        すべての隠れ状態列の総和を効率的に計算し、観測系列の尤度を求める手法です。<br>
        トレリス（時間×状態 の格子）を使い、ステップごとに確率を更新していきます。
      </div>
    </section>

    <!-- ================================
         6) Viterbi アルゴリズム（HMM）
         ================================ -->
    <section id="viterbiControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">Viterbi アルゴリズム（HMM）</h2>
      <div class="controls">
        <label class="label">状態（カンマ区切り）：
          <input type="text" id="vit_states" class="input"
                 placeholder="例: Rainy,Sunny" />
        </label>
        <label class="label">観測系列（カンマ区切り）：
          <input type="text" id="vit_obs" class="input"
                 placeholder="例: walk,shop,clean" />
        </label>
      </div>
      <div class="controls">
        <label class="label">初期確率 π（コンマ区切り；状態順）：
          <input type="text" id="vit_pi" class="input"
                 placeholder="例: 0.6,0.4" />
        </label>
      </div>
      <div class="controls">
        <label class="label">遷移確率 A（行ごとにカンマ区切り，改行区切り）：
          <textarea id="vit_A" class="input" rows="3"
            placeholder="例：
0.7,0.3
0.4,0.6"></textarea>
        </label>
      </div>
      <div class="controls">
        <label class="label">出力確率 B（行ごとにカンマ区切り，改行区切り）：
          <textarea id="vit_B" class="input" rows="3"
            placeholder="例：
0.1,0.4,0.5
0.6,0.3,0.1"></textarea>
        </label>
      </div>
      <div class="controls">
        <button id="vitInitBtn" class="btn">Initialize</button>
      </div>

      <div id="vitTableWrapper" class="table-wrapper">
        <table id="vitTable"></table>
      </div>

      <div class="controls">
        <label class="label">
          Auto Play 速度：
          <span id="vitSpeedLabel">1.0</span> 秒
        </label>
        <input type="range" id="vitSpeedSlider" class="slider"
               min="0.2" max="2.0" step="0.1" value="1.0" />
      </div>
      <div class="step-controls">
        <button id="vitPrevBtn" class="btn" disabled>前へ</button>
        <button id="vitNextBtn" class="btn" disabled>次へ</button>
        <button id="vitAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="vitProgress" class="progress">ステップ 0 / 0</div>
      <div id="vitDesc" class="description">
        <strong>Viterbi アルゴリズムとは：</strong><br>
        HMM において、観測系列が与えられたとき、「最も尤もらしい（最大尤度の）隠れ状態列」を
        動的に求める手法です。<br>
        トレリス（時間×状態 の格子）を使い、ステップごとに最適経路とその確率を更新していきます。
      </div>
    </section>

    <!-- ================================
         7) 線形計画法（単純形法）
         ================================ -->
    <section id="lpControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">線形計画法（単純形法）</h2>
      <div class="controls">
        <textarea id="lp_input" class="input" rows="4" placeholder="
例：
maximize 3x + 2y
s.t.
 x +  y ≤ 5
2x + 3y ≤ 12
 x ≤ 3
 y ≤ 4
"></textarea>
        <button id="lpInitBtn" class="btn">Initialize</button>
        <button id="lpRandomBtn" class="btn">ランダム生成</button>
      </div>

      <div id="simplexContainer">
        <table id="simplexTable" class="simplex-table"></table>
      </div>

      <div class="controls">
        <button id="lpPrevBtn" class="btn" disabled>前へ</button>
        <button id="lpNextBtn" class="btn" disabled>次へ</button>
        <button id="lpAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="lpProgress" class="progress">ステップ 0 / 0</div>
      <div id="lpDesc" class="description">
        <strong>線形計画法（LP）とは：</strong><br>
        目的関数と複数の線形不等式制約から成る最適化問題を解く手法です。<br>
        「単純形表」を使い、ステップごとにピボット操作を可視化します。
      </div>
    </section>

    <!-- ================================
         8) ハッシュ法（オープンアドレス法）
         ================================ -->
    <section id="hashControls" class="section algo-controls" style="display:none;">
      <h2 class="section-title">ハッシュ法（オープンアドレス法）</h2>
      <div class="controls">
        <label class="label">テーブルサイズ：
          <input type="number" id="hash_m" class="input" value="11" min="5" />
        </label>
        <label class="label">キー列（カンマ区切り）：
          <input type="text" id="hash_keys" class="input"
                 placeholder="例: 15,11,27,8,12" />
        </label>
        <label class="label">
          ハッシュ関数 h(k) = k mod m の m を上記テーブルサイズで使用
        </label>
        <button id="hashInitBtn" class="btn">Initialize</button>
        <button id="hashRandomBtn" class="btn">ランダム生成</button>
      </div>

      <div id="hashContainer" class="hash-container">
        <!-- オープンアドレス法の各スロットを .hash-slot で並べる -->
      </div>

      <div class="controls">
        <button id="hashPrevBtn" class="btn" disabled>前へ</button>
        <button id="hashNextBtn" class="btn" disabled>次へ</button>
        <button id="hashAutoBtn" class="btn" disabled>Auto Play</button>
      </div>
      <div id="hashProgress" class="progress">ステップ 0 / 0</div>
      <div id="hashDesc" class="description">
        <strong>ハッシュ法（オープンアドレス法）とは：</strong><br>
        散列関数 h(k) = k mod m を使い、ハッシュテーブルにキーを挿入する手法です。<br>
        衝突が起きた場合は逐次探索（リニアプロービング）で空きスロットを探します。<br>
        各ステップの衝突・挿入状況を可視化します。
      </div>
    </section>
  </main>

  <!-- 外部JS を読み込む -->
  <script src="js/main.js"></script>
</body>
</html>
